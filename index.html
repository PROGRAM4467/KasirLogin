<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aplikasi Kasir</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    height: 100vh;
  }
  /* Sidebar Produk */
  #produkSidebar {
    width: 30%;
    background: #f4f4f4;
    padding: 10px;
    overflow-y: auto;
    border-right: 2px solid #ddd;
  }
  /* Sidebar Keranjang */
  #keranjangSidebar {
    width: 40%;
    background: #fff;
    padding: 10px;
    overflow-y: auto;
    border-left: 2px solid #ddd;
  }
  /* Area Utama */
  #mainArea {
    flex: 1;
    padding: 20px;
    background: #fafafa;
  }
  h2 {
    margin-top: 0;
  }
  button {
    padding: 5px 10px;
    margin: 3px;
    cursor: pointer;
  }
  .produk-item, .keranjang-item {
    display: flex;
    justify-content: space-between;
    margin: 5px 0;
    padding: 5px;
    border-bottom: 1px solid #ddd;
  }
  /* Modal pencarian */
  #searchModal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    justify-content: center; align-items: center;
  }
  #searchModal .modal-content {
    background: white;
    padding: 20px;
    width: 300px;
    border-radius: 8px;
  }
  #searchResults div {
    padding: 5px;
    border-bottom: 1px solid #ddd;
    cursor: pointer;
  }
  #searchResults div:hover {
    background: #eee;
  }
</style>
</head>
<body>

<!-- Sidebar Produk -->
<div id="produkSidebar">
  <h2>Daftar Produk</h2>
  <div id="daftarProduk"></div>
  <h3>Tambah Produk</h3>
  <input type="text" id="namaProduk" placeholder="Nama produk"><br>
  <input type="number" id="hargaProduk" placeholder="Harga"><br>
  <button onclick="tambahProduk()">Tambah</button>
</div>

<!-- Area Utama -->
<div id="mainArea">
  <h1>Kasir Khas</h1>
  <p><b>Shortcut:</b> F3 = Cari Produk</p>
</div>

<!-- Sidebar Keranjang -->
<div id="keranjangSidebar">
  <h2>Keranjang</h2>
  <div id="daftarKeranjang"></div>
  <h3>Total: Rp <span id="totalHarga">0</span></h3>
</div>

<!-- Modal Pencarian -->
<div id="searchModal">
  <div class="modal-content">
    <h3>Cari Produk</h3>
    <input type="text" id="searchInput" placeholder="Ketik nama produk..." oninput="cariProduk()">
    <div id="searchResults"></div>
    <button onclick="tutupModal()">Tutup</button>
  </div>
</div>

<script>
let produk = [
  {id: 1, nama: "Indomie Goreng", harga: 3000},
  {id: 2, nama: "Teh Botol", harga: 5000},
  {id: 3, nama: "Roti", harga: 7000}
];
let keranjang = [];
let nextId = 4;

function renderProduk() {
  const daftar = document.getElementById("daftarProduk");
  daftar.innerHTML = "";
  produk.forEach(p => {
    const div = document.createElement("div");
    div.className = "produk-item";
    div.innerHTML = `
      <span>${p.nama} - Rp${p.harga}</span>
      <button onclick="tambahKeKeranjang(${p.id})">+</button>
    `;
    daftar.appendChild(div);
  });
}

function tambahProduk() {
  const nama = document.getElementById("namaProduk").value;
  const harga = parseInt(document.getElementById("hargaProduk").value);
  if(nama && harga) {
    produk.push({id: nextId++, nama, harga});
    renderProduk();
    document.getElementById("namaProduk").value = "";
    document.getElementById("hargaProduk").value = "";
  }
}

function tambahKeKeranjang(id) {
  const p = produk.find(x => x.id === id);
  if(p) {
    keranjang.push(p);
    renderKeranjang();
  }
}

function renderKeranjang() {
  const daftar = document.getElementById("daftarKeranjang");
  daftar.innerHTML = "";
  let total = 0;
  keranjang.forEach((k, i) => {
    total += k.harga;
    const div = document.createElement("div");
    div.className = "keranjang-item";
    div.innerHTML = `
      <span>${k.nama} - Rp${k.harga}</span>
      <button onclick="hapusKeranjang(${i})">x</button>
    `;
    daftar.appendChild(div);
  });
  document.getElementById("totalHarga").innerText = total;
}

function hapusKeranjang(index) {
  keranjang.splice(index, 1);
  renderKeranjang();
}

// === Modal Pencarian ===
function bukaModal() {
  document.getElementById("searchModal").style.display = "flex";
  document.getElementById("searchInput").focus();
  document.getElementById("searchResults").innerHTML = "";
}

function tutupModal() {
  document.getElementById("searchModal").style.display = "none";
}

function cariProduk() {
  const q = document.getElementById("searchInput").value.toLowerCase();
  const hasil = produk.filter(p => p.nama.toLowerCase().includes(q));
  const resDiv = document.getElementById("searchResults");
  resDiv.innerHTML = "";
  hasil.forEach(p => {
    const div = document.createElement("div");
    div.innerText = `${p.nama} - Rp${p.harga}`;
    div.onclick = () => {
      tambahKeKeranjang(p.id);
      tutupModal();
    };
    resDiv.appendChild(div);
  });
}

// === Shortcut Keyboard ===
document.addEventListener("keydown", function(e) {
  if(e.key === "F3") {
    e.preventDefault();
    bukaModal();
  }
});

// Render awal
renderProduk();
renderKeranjang();
</script>
</body>
</html>
